<!doctype HTML>
<html>

<head>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <title>AR Business Card</title>
    <link rel="icon" type="image/x-icon" href="img/icon.png">

    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>
    <script src="ARCard/CardJS.js"></script>
</head>

<body style='margin : 0px; overflow: hidden;'>
    <!-- we add detectionMode and matrixCodeType to tell AR.js to recognize barcode markers -->
    <a-scene arjs='sourceType: webcam; debugUIEnabled: false; detectionMode: mono_and_matrix; matrixCodeType: 3x3;'
        renderer="logarithmicDepthBuffer: true;" vr-mode-ui='enabled: false;'>
        <a-assets>
            <a-asset-item id="avatar" src="ARCard/Avatar.glb"></a-asset-item>

            <a-mixin id="name" text="align: center; width: 3;
                        font: mozillavr;
                        value: Ethan Chan">
            </a-mixin>

            <a-mixin id="links" text="align: left; width: 4;
                        font: exo2bold;
                        color: white;
                        value: ">
            </a-mixin>

            <video id="video" loop="true" autoplay="true" src="ARCard/Links/BigBuckBunny.mp4" preload="metadata" muted>
            </video>
        </a-assets>


        <a-marker markerhandler emitevents="true" cursor="rayOrigin: mouse" id="animated-marker" type="pattern" url="marker.patt">
        <!-- <a-marker markerhandler emitevents="true" cursor="rayOrigin: mouse" id="animated-marker" preset="hiro"> -->

            <a-image src="ARCard/ScreenBackground.svg" position="-1.5 0 -1.0" rotation="-90 0 0" scale="1 1 1"></a-image>
            <a-video id="cardVideo" src="#video" height="1" width="2" position="-1.5 0 1" rotation="-90 0 0"
                autoplay="true" muted></a-video>

            <a-image id="portfolio" src="ARCard/Links/Portfolio.svg" position="0.75 0 -0.9" rotation="-90 0 0"
                scale="0.25 0.25 0.25"></a-image>
            <a-image id="linkedIn" src="ARCard/Links/LinkedIn.svg" position="0.75 0 -0.6" rotation="-90 0 0"
                scale="0.25 0.25 0.25"></a-image>
            <a-image id="itchIO" src="ARCard/Links/ItchIO.svg" position="0.75 0 -0.3" rotation="-90 0 0"
                scale="0.25 0.25 0.25"></a-image>
            <a-image id="email" src="ARCard/Links/Gmail.svg" position="0.75 0 -0.0" rotation="-90 0 0"
                scale="0.25 0.25 0.25"></a-image>

            <a-text mixin="links" value="Visit my Portfolio!" position="0.9 0 -0.9 + offset" wrap-count="50"
                rotation="-90 0 0"></a-text>
            <a-text mixin="links" value="Connect with me!" position="0.9 0 -0.6" wrap-count="50"
                rotation="-90 0 0"></a-text>
            <a-text mixin="links" value="Check out my games!" position="0.9 0 -0.3" wrap-count="50"
                rotation="-90 0 0"></a-text>
            <a-text mixin="links" value="Send me an email!" position="0.9 0 -0.0" wrap-count="50"
                rotation="-90 0 0"></a-text>

            <a-text mixin="name" position="0 0 0" wrap-count="15" rotation="-90 0 0" color="white"></a-text>

            <a-entity gltf-model="#avatar" position="0 0 -1" rotation="-90 0 0" scale="0.25 0.25 0.25" animation-mixer>
            </a-entity>
        </a-marker>

        <a-entity camera></a-entity>
    </a-scene>
</body>

</html>